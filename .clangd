# =============================================================================
# clangd Language Server Configuration
# =============================================================================
# Reference: https://clangd.llvm.org/config
#
# This file configures clangd for intelligent code completion, diagnostics,
# go-to-definition, and other IDE features in Windsurf/VSCode.
#
# clangd reads this file from the project root automatically.
# =============================================================================

# -----------------------------------------------------------------------------
# Compiler Flags
# -----------------------------------------------------------------------------
# These flags are used when compile_commands.json is not available
CompileFlags:
  # Additional include paths
  Add:
    - -I.
    - -Iinclude
    - -Isrc
    # Enable C17 standard by default
    - -std=c17
    # Enable common warnings
    - -Wall
    - -Wextra
    - -Wpedantic
    # Treat as C (not C++) for .c files
    - -xc

  # Flags to remove if they cause issues
  Remove:
    - -W*  # Let clangd manage warnings via Diagnostics
    
# -----------------------------------------------------------------------------
# Diagnostics (Warnings and Errors)
# -----------------------------------------------------------------------------
Diagnostics:
  # Use our clang-tidy configuration
  ClangTidy:
    # Add checks (these extend the .clang-tidy file)
    Add:
      - bugprone-*
      - cert-*
      - clang-analyzer-*
      - misc-*
      - performance-*
      - readability-*
    # Remove noisy checks
    Remove:
      - bugprone-easily-swappable-parameters
      - misc-no-recursion
      - readability-function-cognitive-complexity
      - readability-magic-numbers
      
  # Suppress specific diagnostics
  Suppress:
    - pp_file_not_found  # Suppress missing header warnings for system headers

  # Treat these warnings as errors
  UnusedIncludes: Strict

# -----------------------------------------------------------------------------
# Indexing
# -----------------------------------------------------------------------------
Index:
  # Background indexing for faster navigation
  Background: Build
  # Index standard library for better completions
  StandardLibrary: Yes

# -----------------------------------------------------------------------------
# Completion
# -----------------------------------------------------------------------------
Completion:
  # Include all scopes in completion
  AllScopes: Yes

# -----------------------------------------------------------------------------
# Hover
# -----------------------------------------------------------------------------
Hover:
  # Show documentation on hover
  ShowAKA: Yes

# -----------------------------------------------------------------------------
# Inlay Hints
# -----------------------------------------------------------------------------
InlayHints:
  # Show parameter names in function calls
  ParameterNames: Yes
  # Show deduced types
  DeducedTypes: Yes
  # Show designators in aggregate initialization
  Designators: Yes
  # Limit hint length
  TypeNameLimit: 24

# -----------------------------------------------------------------------------
# Semantic Highlighting
# -----------------------------------------------------------------------------
# Enable semantic tokens for better syntax highlighting
SemanticTokens:
  DisabledKinds: []
  DisabledModifiers: []

# -----------------------------------------------------------------------------
# Per-Directory Configuration (examples)
# -----------------------------------------------------------------------------
# You can add directory-specific settings like:
#
# If:
#   PathMatch: src/.*
# CompileFlags:
#   Add: [-DDEBUG=1]
#
# If:
#   PathMatch: tests/.*
# CompileFlags:
#   Add: [-DTEST_BUILD=1]
